<%= form_for [@saleable, @sale], remote: true do |f| %>
  <% if @sale.errors.any? %>
    <div class="error_messages">
      <h2>Please correct the following errors.</h2>
      <ul>
      <% @sale.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="control-group">
    <div class="items">
      <%= f.nested_fields_for :sale_items do |f| %>
        <fieldset class="item">
          <%= f.collection_select :item_id, Item.all, :id, :name, :include_blank => t(:"item.form.select_item") %>
          <%= f.text_field :price, placeholder: "Price per unit" %>
          <%= f.text_field :quantity, placeholder: "Quantity" %>
          <a href="#" class="remove">remove</a>

          <%= f.hidden_field :id %>
          <%= f.hidden_field :_destroy %>
        </fieldset>
      <% end %>
    </div>
    <%#= f.text_field :ammount, class: "input-large", placeholder: "ammount" %>
  </div>
  <a href="#" class="add">add more sales</a><br>
  <div class="actions">
    <%= f.submit "Add sale" %>
  </div>
<% end %>

<script type="text/javascript">
$(document).ready(function(e) {
  $('FORM').nestedFields();
  $('.add').trigger('click');
});
</script>
